export const metadata = {
  title: 'Paginação',
  description:
    'Neste guia, veremos como trabalhar com respostas paginadas ao consultar a API do Protocol.',
}

# Paginação

Neste guia, veremos como trabalhar com respostas paginadas ao consultar a API do Protocol. Por padrão, todas as respostas limitam os resultados a dez. No entanto, você pode aumentar até 100 adicionando um parâmetro `limit` às suas solicitações. Se você estiver usando uma das bibliotecas oficiais de cliente da API do Protocol, não precisa se preocupar com a paginação, pois tudo é gerenciado automaticamente. {{ className: 'lead' }}

Quando uma resposta da API retorna uma lista de objetos, independentemente da quantidade, a paginação é suportada. Nas respostas paginadas, os objetos estão aninhados em um atributo `data` e possuem um atributo `has_more` que indica se você chegou ao final da última página. Você pode usar os parâmetros de consulta `starting_after` e `ending_before` para navegar entre as páginas.

## Exemplo usando cursores

<Row>
  <Col>

    Neste exemplo, solicitamos a página que começa após a conversa com o id `s4WycXedwhQrEFuM`. Como resultado, obtemos uma lista de três conversas e podemos verificar pelo atributo `has_more` que chegamos ao final do conjunto de resultados.

    <Properties>
      <Property name="starting_after" type="string">
        O último ID na página em que você está atualmente quando deseja buscar a próxima página.
      </Property>
      <Property name="ending_before" type="string">
        O primeiro ID na página em que você está atualmente quando deseja buscar a página anterior.
      </Property>
      <Property name="limit" type="integer">
        Limita o número de itens retornados.
      </Property>
    </Properties>

  </Col>
  <Col>

    ```bash {{ title: 'Paginação manual usando cURL' }}
    curl -G https://api.protocol.chat/v1/conversations \
      -H "Authorization: Bearer {token}" \
      -d starting_after="s4WycXedwhQrEFuM" \
      -d limit=10
    ```

    ```json {{ title: 'Resposta paginada' }}
    {
      "has_more": false,
      "data": [
        {
          "id": "WAz8eIbvDR60rouK",
          // ...
        },
        {
          "id": "hSIhXBhNe8X1d8Et"
          // ...
        },
        {
          "id": "fbwYwpi9C2ybt6Yb"
          // ...
        }
      ]
    }
    ```

  </Col>
</Row>
